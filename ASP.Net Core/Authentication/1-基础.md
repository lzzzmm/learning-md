# 基础
## 1、Identity
### 1.1 名词介绍
1、Claims
```cs
public class Claim
{
    public string ClaimType { get; set; }

    public string ClaimValue { get; set; }
}
```
ClaimType 就是Key，ClaimValue就代表一个Value。这样的话，刚好可以存储一个键值对。username：cedar。
微软提供了默认的ClaimType，命名空间是System.Security.Claims。Claim存储的是最小的信息单元。

2、ClaimsIdentity
一个人有很多信息：username，gender， phone等，这些信息组合起来就是个人的身份证明。

```cs
public class ClaimsIdentity
{
    public ClaimsIdentity(IEnumerable<Claim> claims){}
    
    // 重要类型的字段为不可set
    public virtual string Name { get; }
    public string Label { get; set; }
    // AuthenticationType身份证明的类型（比如身份证实体，复印件或电子码等）
    public virtual string AuthenticationType { get; }
    
    public virtual void AddClaim(Claim claim);
    
    public virtual void RemoveClaim(Claim claim);
    
    public virtual void FindClaim(Claim claim);
}
```
ClaimsIdentity需要一个抽象出来的接口进行约束：
```cs
// 定义证件对象的基本功能。
public interface IIdentity
{
    //证件名称
    string Name { get; }
    
    // 用于标识证件的载体类型。
    string AuthenticationType { get; }
    
    //是否是合法的证件。
    bool IsAuthenticated { get; }
}
```
```cs
public class ClaimsIdentity : IIdentity
{
    //......
}
```

3、ClaimsPrincipal
一个人不止一个身份，同理一个人在一个系统上也不止一个身份：A部门管理员、B项目负责人等。
ClaimsPrincipal是包含所有身份ClaimsIdentity。
```cs
public class ClaimsPrincipal : IPrincipal
{
    public ClaimsPrincipal(IEnumerable<ClaimsIdentity> identities){}
    
    //主身份
    public virtual IIdentity Identity { get; }
    
    public virtual IEnumerable<ClaimsIdentity> Identities { get; }
    
    public virtual void AddIdentity(ClaimsIdentity identity);
}
```
同理也有一个接口：
```cs
public interface IPrincipal
{
    //身份
    IIdentity Identity { get; }
    
    //在否属于某个角色
    bool IsInRole(string role);
}

```


