# 9-redis-流
stream 是redis5.0版本中新加的数据结构。在以往版本中，为了实现消息队列这一常见应用，往往会使用列表、有序集合和发布订阅者3种功能，但都有各自的缺陷。
- 列表可快速追加消息，但因为是线性结构，所以程序如果要查找包含指定数据的元素，或进行范围查找，需要遍历整个列表
- 有序集合可有效进行范围查找，但缺少列表和发布与订阅提供的阻塞弹出原语
- 发布与订阅可以将消息传递给多个客户端，但一发即忘策略导致离线的客户端丢失消息

还有一个问题是三个共有的：元素都只能是单个值。如果想实现消息队列传递多项信息，必须用JSON之类的序列化格式把多项消息打包存储到单个元素中然后在取出元素后进行相应的反序列操作。

Redis流解决上面的问题。

流包含零个或任意多个流元素的有序队列，队列中每个元素都包含一个ID和任意多个键值对，这些元素会根据ID的大小在流中有序进行排列。

## 1、XADD
**XADD stream id field value [field value ...]**

追加新元素到流的末尾。用户创建元素时是什么顺序，取出时就是什么顺序。